#source = ./monitors.conf

monitor = HDMI-A-1, 1920x1080@60.00Hz ,0x0 , 1
monitor = ,preferred,auto,1,mirror, HDMI-A-1
#monitor = , preferred, auto, 1, mirror, desc:Acer Technologies EK241Y 0460158A3LCJ

exec-once = uwsm app -- wl-paste --type text --watch cliphist -max-items 100 store
exec-once = uwsm app -- wl-paste --type image --watch cliphist -max-items 40 store
exec-once = uwsm app -- wl-paste --watch qs ipc -c new call ipc osdmsg "ŸÜŸèÿ≥ÿÆ ŸÑŸÑÿ≠ÿßŸÅÿ∏ÿ©" "edit-copy"
exec-once = uwsm app -- /usr/lib/polkit-kde-authentication-agent-1
#exec-once = uwsm app -- foot --server
exec-once = uwsm app -- qs -d -c new
#exec-once = gsettings set org.gnome.desktop.interface cursor-theme Breeze_Light

general {
    gaps_in = 3
    # Wallpaer gabs = 10 + aditional gabs = 5 == 15
    gaps_out = 15,15,5,15

    border_size = 2
    col.active_border = rgb(679C69)
    col.inactive_border = rgba(c1c1c190)
    col.nogroup_border_active = rgb(679C69)
    col.nogroup_border = rgba(c1c1c150)

    resize_on_border = true
    hover_icon_on_border = true
    extend_border_grab_area = 25

    layout = dwindle
    allow_tearing = false
}

dwindle {
    pseudotile = true
    preserve_split = true
}

misc {
    vfr = true

    force_default_wallpaper = 0
    disable_hyprland_logo = true
    disable_splash_rendering = true
    background_color = rgb(000000)

    close_special_on_empty = true
    focus_on_activate = true
    disable_autoreload = false
    disable_hyprland_qtutils_check = false
    allow_session_lock_restore = true
    key_press_enables_dpms = true
    #new_window_takes_over_fullscreen = 2
}

xwayland {
    use_nearest_neighbor = true
    force_zero_scaling = false
    enabled = true
}

render {
    explicit_sync = 1
    explicit_sync_kms = 1
    direct_scanout = 1
    cm_enabled = false
    cm_fs_passthrough = 0
}

cursor {
    sync_gsettings_theme = true
    enable_hyprcursor = false
    persistent_warps = false
    no_warps = true
}

input {
    kb_layout = us,ara
    kb_variant = ,digits
    kb_model =
    kb_options = caps:escape,grp:toggle
    kb_rules =
    repeat_rate = 60
    repeat_delay = 500
    follow_mouse = 1
    mouse_refocus = true
    sensitivity = 0
    accel_profile = flat
}

ecosystem {
    enforce_permissions = true
}
permission = /usr/lib/xdg-desktop-portal-hyprland, screencopy, allow
permission = /usr/bin/(qs|quickshell|grim), screencopy, allow
#plugin {
#    hyprbars {
#        bar_height = 24
#        bar_blur = false
#        bar_color = rgba(4D5A9995)
#        #bar_text_font = JetBrainsMono Nerd Font Mono
#
#        #hyprbars-button = rgb(ff4040), 20, Û∞ñ≠, hyprctl dispatch killactive
#        #hyprbars-button = rgb(eeee11), 20, Ôãê, hyprctl dispatch fullscreen 1
#        bar_part_of_window = true
#        bar_precedence_over_border = false
#    }
#}

decoration {
    rounding = 8
    rounding_power = 2
    blur {
        enabled = true
        size = 14
        passes = 2
        popups = false
        xray = true
        contrast = 2
        vibrancy = 1
    }
    #screen_shader = $XDG_CONFIG_HOME/hypr/shaders/vibrance.glsl
    shadow {
        enabled = true
        range = 27
        #offset = 10 10
        render_power = 4
        color = rgba(0, 0, 0, 0.4)
    }
}

group {
    auto_group = true
    insert_after_current = true

    col.border_active = rgb(679C69)
    col.border_inactive = rgba(c1c1c190)

    col.border_locked_active = rgb(679C69)
    col.border_locked_inactive = rgba(c1c1c190)

    groupbar {
        enabled = true
        height = 18
        render_titles = true
        stacked = false
        scrolling = false
        gaps_in = 2
        gaps_out = 2

        gradients = true
        gradient_rounding = 5
        gradient_round_only_edges = false

        indicator_height = 0
        rounding = 5
        round_only_edges = false
        priority = 3

        font_size = 13


        col.active = rgb(679C69)
        col.inactive = rgb(222222)

        col.locked_active = rgb(679C69)
        col.locked_inactive = rgba(CD555EFF)
    }
}

animations {
    enabled = yes
    first_launch_animation = false
    #bezier = overshot,0.05,0.9,0.1,1.1
    bezier = in, 0.1, 0.85, 0.15, 1.05
    bezier = move, 0.06 ,0.7, 0.25 ,1.05
    bezier = workspaces, 0.1, 0.75, 0.15, 1

    #animation = windows, 1, 5, myBezier,slide
    animation = windowsIn, 1, 5, in, slide
    animation = windowsOut, 1, 5, in, slide
    animation = windowsMove, 1, 3, move

    animation = fadeLayers, 1,5,default
    animation = layers, 1, 4, in, slide

    animation = workspaces, 1, 5, workspaces, slide

    animation = border, 0
    animation = borderangle, 0
}

debug {
    disable_logs = true
    colored_stdout_logs = false
}

windowrule = noblur,class:^(.*)
windowrule = noblur 0,class:^(footclient|org.pwmt.zathura|kitty)

# Browser Picture-in-Picture
windowrule = float,class:^(LibreWolf|firefox),title:^(Picture-in-Picture|Library)
windowrule = noborder,class:^(LibreWolf|firefox),title:^(Picture-in-Picture)
windowrule = pin,class:^(LibreWolf|firefox),title:^(Picture-in-Picture)

# Steam
windowrule = noshadow,class:^(steam)
windowrule = noborder,class:^(steam)
windowrule = pin,class:^(steam),title:^(notificationtoasts.*)
windowrule = float,class:^(steam)
windowrule = workspace 4 silent,class:^(steam)
windowrule = tile,class:^(steam)$,title:^(Steam)$

# Games
$games = steam_app_.*|gamescope|cs2
windowrule = content game,      class:^($games)
windowrule = renderunfocused,   class:^($games)
windowrule = immediate,         class:^($games)
windowrule = noanim,            class:^($games)
windowrule = float,             class:^($games)
windowrule = noborder,          class:^($games)
windowrule = noshadow,          class:^($games)
windowrule = norounding,        class:^($games)
windowrule = workspace 5 silent,class:^($games)

# windowrule = workspace 5 silent,class:^(cs2)
# windowrule = renderunfocused,   class:^(cs2)
# windowrule = immediate,   class:^(cs2)
# windowrule = noanim,      class:^(cs2)
# windowrule = float,       class:^(cs2)
# windowrule = noborder,    class:^(cs2)
# windowrule = noshadow,    class:^(cs2)

#windowrulev= workspace 5 silent,class:^(gamescope)
#windowrulev= norounding,  class:^(gamescope)
#windowrulev= immediate,   class:^(gamescope)
#windowrulev= noanim,      class:^(gamescope)
#windowrulev= float,       class:^(gamescope)
#windowrulev= noborder,    class:^(gamescope)
#windowrulev= noshadow,    class:^(gamescope)

# For games and videos
windowrule = idleinhibit focus, fullscreen:1

$floats = org.kde.ark|pavucontrol-qt|io.github.ilya_zlobintsev.LACT|io.github.lact-linux|io.missioncenter.MissionCenter|mpv|qimgv|org.freedesktop.impl.portal.desktop.kde|org.ksnip.ksnip
windowrule = float, workspace:5
windowrule = float, class:^($floats)
windowrule = size 1000 700,class:^(org.freedesktop.impl.portal.desktop.kde)
windowrule = group deny,class:^(hyprland-share-picker)

workspace = special:magic, on-created-empty: footclient

layerrule = noanim, screenshot
layerrule = noanim, selection
layerrule = animation fade,shell


$mainMod = SUPER
bind = $mainMod, T, exec, uwsm app -- footclient
bind = $mainMod, N, exec, uwsm app -- nvim.desktop
bind = $mainMod, E, exec, uwsm app -- dolphin

# Convenient emoji!
# copid from jon
#bind = ALT, Q, submap, emoji
#submap = emoji
#bind = , T, exec, wtype 'üéâ'
#bind = , T, submap, reset
#bind = , apostrophe, exec, wtype 'üòÖ'
#bind = , apostrophe, submap, reset
#bind = , 3, exec, wtype '‚ù§Ô∏è'
#bind = , 3, submap, reset
#bind = , equal, exec, wtype 'üëç'
#bind = , equal, submap, reset
#bind = , escape, submap, reset
#submap = reset

bind = $mainMod, minus, exec, hyprctl keyword cursor:zoom_factor $(awk "BEGIN {print $(hyprctl getoption cursor:zoom_factor | grep 'float:' | awk '{print $2}') - 0.3}")
bind = $mainMod, equal, exec, hyprctl keyword cursor:zoom_factor $(awk "BEGIN {print $(hyprctl getoption cursor:zoom_factor | grep 'float:' | awk '{print $2}') + 0.3}")

#WINDOWS
bind = $mainMod, Q, killactive,
bind = $mainMod, G, togglefloating,
bind = $mainMod, X, togglesplit,
bind = $mainMod, F, fullscreen
bind = $mainMod, Z, pin

bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

bind = $mainMod ALT, J, movewindow, d
bind = $mainMod ALT, K, movewindow, u
bind = $mainMod ALT, L, movewindow, r
bind = $mainMod ALT, H, movewindow, l

binde = $mainMod SHIFT, H, resizeactive, -20 0
binde = $mainMod SHIFT, L, resizeactive,  20 0
binde = $mainMod SHIFT, J, resizeactive,  0  20
binde = $mainMod SHIFT, K, resizeactive,  0 -20

bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

#WORKSPACES
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = CTRL, 1, movetoworkspace, 1
bind = CTRL, 2, movetoworkspace, 2
bind = CTRL, 3, movetoworkspace, 3
bind = CTRL, 4, movetoworkspace, 4
bind = CTRL, 5, movetoworkspace, 5
bind = CTRL, 6, movetoworkspace, 6
bind = CTRL, 7, movetoworkspace, 7
bind = CTRL, 8, movetoworkspace, 8
bind = CTRL, 9, movetoworkspace, 9
bind = CTRL, 0, movetoworkspace, 10

#Special-workspace
bind = $mainMod,      S, togglespecialworkspace, magic
bind = $mainMod CTRL, S, movetoworkspace, special:magic

#GROUPS
bind = $mainMod,      W, togglegroup
bind = $mainMod,    TAB, changegroupactive
bind = $mainMod,      D, lockactivegroup, toggle
bind = $mainMod CTRL, W, moveoutofgroup, active

bind = $mainMod CTRL, H, moveintogroup, l
bind = $mainMod CTRL, L, moveintogroup, r
bind = $mainMod CTRL, K, moveintogroup, u
bind = $mainMod CTRL, J, moveintogroup, d

#bindle= , XF86AudioRaiseVolume, exec,wpctl set-mute @DEFAULT_AUDIO_SINK@ 0 && wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
#bindle= , XF86AudioLowerVolume, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ 0 && wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%-
#bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ 0

#MISC
bind = $mainMod SHIFT, S, exec, screenshot region
bind = $mainMod,       A, exec, screenshot full

#GPU-screen-recorder
bind = $mainMod CTRL,  R, exec, uwsm app -- gsr toggle
bind = $mainMod ALT,   R, exec, uwsm app -- gsr record
bind = CTRL SHIFT,     R, exec, gsr save
bind = $mainMod, F1, exec, gamemode

bind = $mainMod, BackSpace ,exec, loginctl lock-session

bind = , XF86AudioNext, exec, noti-playerctl next
bind = , XF86AudioPlay, exec, noti-playerctl play-pause
bind = , XF86AudioPrev, exec, noti-playerctl previous

#Quickshell shotcuts
bind = ALT,     Tab,     global, quickshell:windowswitcher
bind = $mainMod, V,      global, quickshell:clipboard
bind = $mainMod, R,      global, quickshell:launcher
bind = $mainMod, B,      global, quickshell:gameoverlay
bind = $mainMod, period, global, quickshell:emojier

#Audio-stuff
bind = , XF86AudioRaiseVolume, global, quickshell:increaseSinkVolume
bind = , XF86AudioLowerVolume, global, quickshell:decreaseSinkVolume
bind = , XF86AudioMute,        global, quickshell:toggleMuteSink

bind = ,XF86PowerDown,exec,
bind = ,XF86PowerOff,exec,
